<div data-role="header" data-position="fixed">
	<a href="#" data-icon="back" data-iconpos="notext" class="back ui-btn-left">Back</a>

	<h1><%- group.name %></h1>
	<a id="add-member-btn" class="ui-btn-right" data-icon="plus" data-iconpos="notext">Einladen</a>
</div>

<div class="ui-content" role="main">
	<ul data-role="listview">
		<!-- pending invite handling -->
		<% if (pendingInvite) { %>
		<li>
			<p style="white-space: normal;">Sie wurden von <%= pendingInvite.invitedBy %> eingeladen dieser Gruppe beizutreten.</p>
			<button id="accept-invite-btn" style="width: 49%; float:left;">Beitreten</button>
			<button id="decline-invite-btn" style="width: 49%; float:right;">Ablehnen</button>
		</li>
		<% } %>

		<!-- accepted dates -->
		<% if (!pendingInvite && dates.length > 0) { %>
		<li data-role="list-divider">Termine</li>
		<% _.each( dates, function( date ){ %>
		<li>
			<%= date.name %>
		</li>
		<% }); %>
		<% } %>

		<!-- member -->
		<li data-role="list-divider">Mitglieder</li>
		<% _.each( members, function( member ){ %>
		<li>
			<h3 style="font-weight: bold; margin-top:0;"><%= member.email %></h3>

			<% if (member.email !== userEmail) { %>
			<div data-role="controlgroup" data-type="horizontal" data-mini="true" style="float: right; margin: 0 0 0 10px;">
				<span data-member-email="<%= member.email %>"
					  class="ui-btn ui-corner-all ui-icon-mail ui-btn-icon-notext">Mail schreiben</span>
				<span data-member-email="<%= member.email %>"
					  class="ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext">Löschen</span>
			</div>
			<% } %>

			<p>
			<% if (member.invitationState === "ACCEPTED" && member.invitedBy === member.email) { %>
				Mitglied seit: <%= member.lastStateChange %><br>
					Gruppengründer(in)
			<% } else if (member.invitationState === "ACCEPTED" && member.invitedBy !== member.email)) { %>
				Mitglied seit: <%= member.lastStateChange %><br>
				eingeladen von: <%= member.invitedBy %>
			<% } else if (member.invitationState === "INVITED") { %>
				Eingeladen am <%= member.lastStateChange %><br>
				eingeladen von: <%= member.invitedBy %>
			<% } %>
			</p>

		</li>
		<% }); %>

		<!-- other options -->
		<% if (!pendingInvite) { %>
		<li data-role="list-divider">Optionen</li>
		<li id="rename-group-btn"><a>Gruppe umbenennen</a></li>
		<li id="leave-group-btn"><a>Gruppe verlassen</a></li>
		<% } %>
	</ul>
</div>